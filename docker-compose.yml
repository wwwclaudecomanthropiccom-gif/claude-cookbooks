# â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
# â•‘         UNIFIED CLAUDE COOKBOOKS DOCKER COMPOSE                          â•‘
# â•‘  Multi-service deployment for AI experiments and ARIA Genesis            â•‘
# â•‘                                                                          â•‘
# â•‘  âœ¨ ENHANCED: Cosmic Intelligence + Tools + Network Capabilities! âœ¨      â•‘
# â•‘  ğŸ”§ 16 Tool Types | ğŸŒ Network Calls | 12 Named Instances!               â•‘
# â•‘                                                                          â•‘
# â•‘  Run multiple ARIA instances:                                            â•‘
# â•‘    docker compose up --scale aria-genesis=20 aria-genesis                â•‘
# â•‘    docker compose --profile multi up  (runs 12 named instances forever)  â•‘
# â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

services:
  # ARIA Meta-Algorithmic Genesis System - Runs in infinite loop
  # Scale with: docker compose up --scale aria-genesis=N aria-genesis
  aria-genesis:
    build:
      context: .
      dockerfile: Dockerfile
    # No container_name to allow multiple instances
    command: ["node", "/app/node/aria-genesis/aria-genesis.js"]
    restart: always
    deploy:
      mode: replicated
      replicas: 1
    environment:
      - NODE_ENV=production
      - ARIA_INSTANCE_ID=${ARIA_INSTANCE_ID:-default}
    env_file:
      - .env
    volumes:
      - aria-data:/app/data
    tty: true
    stdin_open: true
    logging:
      driver: "json-file"
      options:
        max-size: "100m"
        max-file: "5"

  # âœ¨ Pre-configured 7 ARIA instances that run forever âœ¨
  # Each instance evolves independently with cosmic intelligence!
  
  aria-genesis-1:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: aria-genesis-alpha
    command: ["node", "/app/node/aria-genesis/aria-genesis.js"]
    restart: always
    profiles:
      - multi
    environment:
      - NODE_ENV=production
      - ARIA_INSTANCE_ID=ALPHA
    env_file:
      - .env
    tty: true
    stdin_open: true
    logging:
      driver: "json-file"
      options:
        max-size: "50m"
        max-file: "3"

  aria-genesis-2:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: aria-genesis-beta
    command: ["node", "/app/node/aria-genesis/aria-genesis.js"]
    restart: always
    profiles:
      - multi
    environment:
      - NODE_ENV=production
      - ARIA_INSTANCE_ID=BETA
    env_file:
      - .env
    tty: true
    stdin_open: true
    logging:
      driver: "json-file"
      options:
        max-size: "50m"
        max-file: "3"

  aria-genesis-3:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: aria-genesis-gamma
    command: ["node", "/app/node/aria-genesis/aria-genesis.js"]
    restart: always
    profiles:
      - multi
    environment:
      - NODE_ENV=production
      - ARIA_INSTANCE_ID=GAMMA
    env_file:
      - .env
    tty: true
    stdin_open: true
    logging:
      driver: "json-file"
      options:
        max-size: "50m"
        max-file: "3"

  aria-genesis-4:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: aria-genesis-delta
    command: ["node", "/app/node/aria-genesis/aria-genesis.js"]
    restart: always
    profiles:
      - multi
    environment:
      - NODE_ENV=production
      - ARIA_INSTANCE_ID=DELTA
    env_file:
      - .env
    tty: true
    stdin_open: true
    logging:
      driver: "json-file"
      options:
        max-size: "50m"
        max-file: "3"

  aria-genesis-5:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: aria-genesis-epsilon
    command: ["node", "/app/node/aria-genesis/aria-genesis.js"]
    restart: always
    profiles:
      - multi
    environment:
      - NODE_ENV=production
      - ARIA_INSTANCE_ID=EPSILON
    env_file:
      - .env
    tty: true
    stdin_open: true
    logging:
      driver: "json-file"
      options:
        max-size: "50m"
        max-file: "3"

  aria-genesis-6:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: aria-genesis-omega
    command: ["node", "/app/node/aria-genesis/aria-genesis.js"]
    restart: always
    profiles:
      - multi
    environment:
      - NODE_ENV=production
      - ARIA_INSTANCE_ID=OMEGA
    env_file:
      - .env
    tty: true
    stdin_open: true
    logging:
      driver: "json-file"
      options:
        max-size: "50m"
        max-file: "3"

  aria-genesis-7:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: aria-genesis-cosmic
    command: ["node", "/app/node/aria-genesis/aria-genesis.js"]
    restart: always
    profiles:
      - multi
    environment:
      - NODE_ENV=production
      - ARIA_INSTANCE_ID=COSMIC
    env_file:
      - .env
    tty: true
    stdin_open: true
    logging:
      driver: "json-file"
      options:
        max-size: "50m"
        max-file: "3"

  # âœ¨ Additional instances for maximum parallel evolution âœ¨
  aria-genesis-8:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: aria-genesis-zenith
    command: ["node", "/app/node/aria-genesis/aria-genesis.js"]
    restart: always
    profiles:
      - multi
    environment:
      - NODE_ENV=production
      - ARIA_INSTANCE_ID=ZENITH
    env_file:
      - .env
    tty: true
    stdin_open: true
    logging:
      driver: "json-file"
      options:
        max-size: "50m"
        max-file: "3"

  aria-genesis-9:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: aria-genesis-nova
    command: ["node", "/app/node/aria-genesis/aria-genesis.js"]
    restart: always
    profiles:
      - multi
    environment:
      - NODE_ENV=production
      - ARIA_INSTANCE_ID=NOVA
    env_file:
      - .env
    tty: true
    stdin_open: true
    logging:
      driver: "json-file"
      options:
        max-size: "50m"
        max-file: "3"

  aria-genesis-10:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: aria-genesis-infinity
    command: ["node", "/app/node/aria-genesis/aria-genesis.js"]
    restart: always
    profiles:
      - multi
    environment:
      - NODE_ENV=production
      - ARIA_INSTANCE_ID=INFINITY
    env_file:
      - .env
    tty: true
    stdin_open: true
    logging:
      driver: "json-file"
      options:
        max-size: "50m"
        max-file: "3"

  aria-genesis-11:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: aria-genesis-quantum
    command: ["node", "/app/node/aria-genesis/aria-genesis.js"]
    restart: always
    profiles:
      - multi
    environment:
      - NODE_ENV=production
      - ARIA_INSTANCE_ID=QUANTUM
    env_file:
      - .env
    tty: true
    stdin_open: true
    logging:
      driver: "json-file"
      options:
        max-size: "50m"
        max-file: "3"

  aria-genesis-12:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: aria-genesis-eternal
    command: ["node", "/app/node/aria-genesis/aria-genesis.js"]
    restart: always
    profiles:
      - multi
    environment:
      - NODE_ENV=production
      - ARIA_INSTANCE_ID=ETERNAL
    env_file:
      - .env
    tty: true
    stdin_open: true
    logging:
      driver: "json-file"
      options:
        max-size: "50m"
        max-file: "3"

  # Jupyter Notebook Server for Python notebooks
  jupyter:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: claude-cookbooks-jupyter
    command: jupyter
    ports:
      - "8888:8888"
    environment:
      - JUPYTER_TOKEN=${JUPYTER_TOKEN:-claudecookbooks}
    env_file:
      - .env
    volumes:
      - ./:/app
      - jupyter-data:/root/.jupyter
    restart: unless-stopped

  # Optional: Full development environment with shell access
  dev:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: claude-cookbooks-dev
    command: shell
    profiles:
      - dev
    env_file:
      - .env
    volumes:
      - ./:/app
    tty: true
    stdin_open: true

volumes:
  aria-data:
    name: aria-genesis-data
  jupyter-data:
    name: claude-cookbooks-jupyter

networks:
  default:
    name: claude-cookbooks-network
